@page
@model ProyectoSitios.Pages.Bitacoras.IndexModel
@{
}
<div class="container-fluid px-4">
    <h1 class="mt-4">Bitácora</h1>
    <ol class="breadcrumb mb-4">
        <li class="breadcrumb-item"><a asp-page="/Index">Dashboard</a></li>
        <li class="breadcrumb-item active">Bitácora</li>
    </ol>

    <div class="card mb-4">
        <div class="card-header">
            <i class="fas fa-table me-1"></i>
            Bitácora
        </div>
        <div class="card-body">
            <table id="datatablesSimple">
                <thead>
                    <tr>

                        <th data-type="date" data-format="DD/MM/YYYY HH:mm:ss">Fecha</th>
                        <th>Descripción</th>
                        <th>Usuario</th>

                    </tr>
                </thead>
                <tfoot>
                    <tr>
               
                        <th data-type="date" data-format="DD/MM/YYYY HH:mm:ss">Fecha</th>
                        <th>Descripción</th>
                        <th>Usuario</th>
                    </tr>
                </tfoot>
                <tbody>
                    @foreach (var item in Model.Bitacoras)
                    {
                        <tr>

                            <td>@item.Fecha.ToString("dd/MM/yyyy HH:mm:ss")</td>
                            <td>@item.Descripcion</td>
                            <td>@item.Nombre</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
<script>
    window.addEventListener('DOMContentLoaded', event => {
        const datatablesSimple = document.getElementById('datatablesSimple');

        if (datatablesSimple) {
            const dataTable = new simpleDatatables.DataTable(datatablesSimple, {
                perPage: 100,
                perPageSelect: [100],
                searchable: true,
                fixedHeight: true,
                order: [[0, "desc"]], 
                columns: [
                    {
                        select: 0,
                        type: "date",
                        format: "DD/MM/YYYY HH:mm:ss"
                    }
                ],
                labels: {
                    placeholder: "Buscar...",
                    perPage: "registros por página",
                    noRows: "No hay registros disponibles",
                    info: "Mostrando {start} a {end} de {rows} registros",
                    loading: "Cargando...",
                    infoFiltered: " (filtrado de {rowsTotal} registros totales)",
                }
            });

          
            setTimeout(() => {
                dataTable.setOrder([[0, "desc"]]);
            }, 500);
        }
    });

</script>

